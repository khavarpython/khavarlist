@model TopMediaView
@{
    ViewData["Title"] = "Home Page";
}

<!--- Hero Div -->
<h2 class="pt-1 mt-3"> Top Anime</h2>
<div class="hero"
     style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
            url('@Url.Content("~/images/frieren.avif")');">
    <div class="hero-text">
        <h3>Frieren</h3>
    </div>
</div>

<!--First Scroll Div-->
<div class="d-flex justify-content-between border-1 border-bottom border-white pb-1">
    <h5 >Top Anime</h5>
    <a>More Anime</a>
</div>

<div class="scroll-container position-relative mt-1">
    <button class="scroll-arrow scroll-arrow-left">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
    </button>

    <div class="scroll-content d-flex gap-3 overflow-x-hidden text-nowrap overflow-y-hidden">
        @if (Model.TopAnime != null)
        {
            @foreach (var anime in Model.TopAnime)
            {
                <div class="h-auto flex-shrink-0" style="width:11rem;">
                    <img src="@anime.Images.Jpg.ImageUrl" style="width:11rem;height:16rem;" />
                    <div class="text-wrap">
                        <div style="font-size:0.8rem;margin-left:8px;">
                            @anime.Title
                        </div>
                    </div>
                </div>
            }
        }
    </div>

    <button class="scroll-arrow scroll-arrow-right">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </button>
</div>

<!-- Second Scroll Div -->
<div class="d-flex justify-content-between border-1 border-bottom border-white pb-1">
    <h5>Top Manga</h5>
    <a>More Manga</a>
</div>

<div class="scroll-container position-relative mt-1">
    <button class="scroll-arrow scroll-arrow-left">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
    </button>

    <div class="scroll-content d-flex gap-3 overflow-x-hidden text-nowrap overflow-y-hidden">
        @if(Model.TopManga != null)
        {
            @foreach (var manga in Model.TopManga)
            {
                <div class="h-auto flex-shrink-0" style="width:11rem;">
                    <img src="@manga.Images.Jpg.ImageUrl" style="width:11rem;height:16rem;" />
                    <div class="text-wrap">
                        <div style="font-size:0.8rem;margin-left:8px;">
                            @manga.Title
                        </div>
                    </div>
                </div>
            }
        }
    </div>

    <button class="scroll-arrow scroll-arrow-right">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </button>
</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Find all scroll containers
            const scrollContainers = document.querySelectorAll('.scroll-container');

            scrollContainers.forEach(container => {
                const scrollContent = container.querySelector('.scroll-content');
                const leftBtn = container.querySelector('.scroll-arrow-left');
                const rightBtn = container.querySelector('.scroll-arrow-right');

                if (!scrollContent || !leftBtn || !rightBtn) return;

                function getScrollAmount() {
                    const cardWidthRem = 11;
                    const gapRem = 1;
                    const remInPixels = parseFloat(getComputedStyle(document.documentElement).fontSize);
                    return (cardWidthRem + gapRem) * 4 * remInPixels;
                }

                function updateArrows() {
                    const isAtStart = scrollContent.scrollLeft <= 0;
                    const isAtEnd = scrollContent.scrollLeft + scrollContent.clientWidth >= scrollContent.scrollWidth - 1;
                    leftBtn.disabled = isAtStart;
                    rightBtn.disabled = isAtEnd;
                }

                leftBtn.addEventListener('click', function() {
                    scrollContent.scrollBy({
                        left: -getScrollAmount(),
                        behavior: 'smooth'
                    });
                });

                rightBtn.addEventListener('click', function() {
                    scrollContent.scrollBy({
                        left: getScrollAmount(),
                        behavior: 'smooth'
                    });
                });

                scrollContent.addEventListener('scroll', updateArrows);
                updateArrows();
            });

            window.addEventListener('resize', function() {
                scrollContainers.forEach(container => {
                    const scrollContent = container.querySelector('.scroll-content');
                    const leftBtn = container.querySelector('.scroll-arrow-left');
                    const rightBtn = container.querySelector('.scroll-arrow-right');

                    if (scrollContent && leftBtn && rightBtn) {
                        const isAtStart = scrollContent.scrollLeft <= 0;
                        const isAtEnd = scrollContent.scrollLeft + scrollContent.clientWidth >= scrollContent.scrollWidth - 1;
                        leftBtn.disabled = isAtStart;
                        rightBtn.disabled = isAtEnd;
                    }
                });
            });
        });
    </script>
