@model ProfileView
@{
    ViewData["Title"] = "Profile";
}

<div>
    <h3 class="my-4 br-orange">Anime List</h3>
    @if (Model.UserAnimes != null && Model.UserAnimes.Any())
    {
        <div class="my-3 py-3 px-3 rounded border w-100 w-md-50 mx-auto" style="background-color:#2D2D2D;">
            <div class="d-flex justify-content-around gap-3 mb-3 pb-3 border-bottom border-secondary flex-wrap text-center text-white">
                <span style="font-size:0.9rem;">Duration: <strong>@Model.AnimeStats.Days Days</strong></span>
                <span style="font-size:0.9rem;">Avg Score: <strong>@Model.AnimeStats.AverageScore</strong></span>
                <span style="font-size:0.9rem;">Entries: <strong>@Model.AnimeStats.TotalEntries</strong></span>
                <span style="font-size:0.9rem;">Episodes: <strong>@Model.AnimeStats.TotalEpisodes</strong></span>
            </div>
            <div class="d-flex justify-content-around gap-3 flex-wrap text-center text-white">
                <span style="font-size:0.9rem;">Watching: <strong>@Model.AnimeStats.Watching</strong></span>
                <span style="font-size:0.9rem;">Completed: <strong>@Model.AnimeStats.Completed</strong></span>
                <span style="font-size:0.9rem;">On Hold: <strong>@Model.AnimeStats.OnHold</strong></span>
                <span style="font-size:0.9rem;">Plan to Watch: <strong>@Model.AnimeStats.PlanToWatch</strong></span>
                <span style="font-size:0.9rem;">Dropped: <strong>@Model.AnimeStats.Dropped</strong></span>
            </div>
        </div>

        <!-- Mobile: Card Layout -->
        <div class="d-md-none">
            @foreach (var userAnime in Model.UserAnimes)
            {
                <a class="text-decoration-none orange fw-bold" asp-controller="Show" asp-action="Anime" asp-route-id="@userAnime.Anime.MalId">
                    <div class="card bg-dark text-white mb-3 border-secondary">
                        <div class="row g-0">
                            <div class="col-4">
                                <img class="img-fluid object-fit-cover h-100" src="@userAnime.Anime.Image" alt="@userAnime.Anime.Title" />
                            </div>
                            <div class="col-8">
                                <div class="card-body p-2">
                                
                                        @userAnime.Anime.Title
                            
                                    <div class="mt-2" style="font-size:0.85rem;">
                                        <div class="orange">Score: @userAnime.Score</div>
                                        <div class="orange">Progress: @userAnime.Progress / @userAnime.Anime.TotalEpisodes</div>
                                        <div class="orange">Status: @userAnime.WatchStatus</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            }
        </div>

        <!-- Desktop: Table Layout -->
        <div class="d-none d-md-block">
            <table class="table table-dark table-hover" style="table-layout:fixed;"> 
                <colgroup>
                    <col style="width: 10%;">
                    <col style="width: 45%;">
                    <col style="width: 15%;">
                    <col style="width: 15%;">
                    <col style="width: 15%;">
                </colgroup>

                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Anime Title</th>
                        <th>Score</th>
                        <th>Progress</th>
                        <th>Status</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var userAnime in Model.UserAnimes)
                    {
                        <tr class="position-relative">
                            <td>
                                <img class="object-fit-cover" style="width:4rem;height:5rem;" src="@userAnime.Anime.Image" alt="@userAnime.Anime.Title" />
                            </td>
                            <td class="text-wrap">
                                <a class="text-decoration-none orange stretched-link" asp-controller="Show" asp-action="Anime" asp-route-id="@userAnime.Anime.MalId">
                                    @userAnime.Anime.Title
                                </a>
                            </td>
                            <td class="orange">
                                @userAnime.Score
                            </td>
                            <td class="orange">
                                @userAnime.Progress / @userAnime.Anime.TotalEpisodes
                            </td>
                            <td class="orange">
                                @userAnime.WatchStatus
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <h5 class="text-center">No Anime In List</h5>
    }
</div>

<div>
    <h3 class="mt-1 br-orange">Manga List</h3>

    @if (Model.UserMangas != null && Model.UserMangas.Any())
    {
        <div class="my-3 py-3 px-3 rounded border w-100 w-md-50 mx-auto" style="background-color:#2D2D2D;">
            <div class="d-flex justify-content-around gap-3 mb-3 pb-3 border-bottom border-secondary flex-wrap text-center text-white">
                <span style="font-size:0.9rem;">Duration: <strong>@Model.MangaStats.Days Days</strong></span>
                <span style="font-size:0.9rem;">Avg Score: <strong>@Model.MangaStats.AverageScore</strong></span>
                <span style="font-size:0.9rem;">Entries: <strong>@Model.MangaStats.TotalEntries</strong></span>
                <span style="font-size:0.9rem;">Chapters: <strong>@Model.MangaStats.TotalChapters</strong></span>
            </div>
            <div class="d-flex justify-content-around gap-3 flex-wrap text-center text-white">
                <span style="font-size:0.9rem;">Reading: <strong>@Model.MangaStats.Reading</strong></span>
                <span style="font-size:0.9rem;">Completed: <strong>@Model.MangaStats.Completed</strong></span>
                <span style="font-size:0.9rem;">On Hold: <strong>@Model.MangaStats.OnHold</strong></span>
                <span style="font-size:0.9rem;">Plan to Read: <strong>@Model.MangaStats.PlanToRead</strong></span>
                <span style="font-size:0.9rem;">Dropped: <strong>@Model.MangaStats.Dropped</strong></span>
            </div>
        </div>


        <!-- Mobile: Card Layout -->
        <div class="d-md-none">
            @foreach (var userManga in Model.UserMangas)
            {
                <a class="text-decoration-none orange stretched-link" asp-controller="Show" asp-action="Manga" asp-route-id="@userManga.Manga.MalId">
                    <div class="card bg-dark text-white mb-3 border-secondary">
                        <div class="row g-0">
                            <div class="col-4">
                                <img class="img-fluid object-fit-cover h-100" src="@userManga.Manga.Image" alt="@userManga.Manga.Title" />
                            </div>
                            <div class="col-8">
                                <div class="card-body p-2">
                                    <a class="text-decoration-none orange fw-bold" asp-controller="Show" asp-action="Manga" asp-route-id="@userManga.Manga.MalId">
                                        @userManga.Manga.Title
                                    </a>
                                    <div class="mt-2" style="font-size:0.85rem;">
                                        <div class="orange">Score: @userManga.Score</div>
                                        <div class="orange">Progress: @userManga.Progress / @userManga.Manga.TotalChapters</div>
                                        <div class="orange">Status: @userManga.ReadStatus</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            }
        </div>

        <!-- Desktop: Table Layout -->
        <div class="d-none d-md-block">
            <table class="table table-dark table-hover" style="table-layout:fixed;">
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 40%;">
                    <col style="width: 15%;">
                    <col style="width: 15%;">
                    <col style="width: 15%;">
                </colgroup>

                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Manga Title</th>
                        <th>Score</th>
                        <th>Progress</th>
                        <th>Status</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var userManga in Model.UserMangas)
                    {
                        <tr class="position-relative">
                            <td>
                                <img class="object-fit-cover" style="width:4rem;height:5rem;" src="@userManga.Manga.Image" alt="@userManga.Manga.Title" />
                            </td>
                            <td class="text-wrap">
                                <a class="text-decoration-none orange stretched-link" asp-controller="Show" asp-action="Manga" asp-route-id="@userManga.Manga.MalId">
                                    @userManga.Manga.Title
                                </a>
                            </td>
                            <td class="orange">
                                @userManga.Score
                            </td>
                            <td class="orange">
                                @userManga.Progress / @userManga.Manga.TotalChapters
                            </td>
                            <td class="orange">
                                @userManga.ReadStatus
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <h5 class="text-center">No Manga in List</h5>
    }
</div>